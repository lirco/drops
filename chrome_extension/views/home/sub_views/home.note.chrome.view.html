<div class="cp-new-note-wrapper">

  <!--Title-->
  <div class="cp-new-note-title-wrapper">
    <form name="noteTitleForm" flex>
      <!-- title for a new note -->
      <md-input-container class="cp-new-note-title" ng-if="homeCtrl.editMode == false" md-no-float>
        <textarea ng-model="homeCtrl.newNote.title" placeholder="New Note Title" maxlength="70"></textarea>
      </md-input-container>
      <!-- update title of existing note -->
      <md-input-container class="cp-new-note-title" ng-if="homeCtrl.editMode == true" md-no-float>
        <textarea ng-model="homeCtrl.editedNote.title" maxlength="70"></textarea>
      </md-input-container>
    </form>
  </div>

  <!--Content-->
  <div class="cp-new-note-content-wrapper">
    <form name="noteContentForm">
      <!-- content for a new note -->
      <md-input-container class="cp-new-note-content" ng-if="homeCtrl.editMode == false" md-no-float >
        <textarea class="no-border" ng-model="homeCtrl.newNote.content" placeholder="Note Content"></textarea>
      </md-input-container>
      <!-- update content for an existing note -->
      <md-input-container class="cp-new-note-content" ng-if="homeCtrl.editMode == true" md-no-float>
        <textarea class="no-border" ng-model="homeCtrl.editedNote.content"></textarea>
      </md-input-container>
    </form>
  </div>

  <!--Tags-->
  <div class="cp-new-note-tags-wrapper">

    <div ng-if="homeCtrl.editMode == false" class="cp-new-note-tags">
      <md-chips
              md-autocomplete-snap
              ng-model="homeCtrl.newNote.tags"
              md-on-append="homeCtrl.newTagAppend($chip)">
        <md-autocomplete
                md-input-name="autocompleteField"
                md-selected-item="homeCtrl.selectedItem"
                md-search-text="homeCtrl.searchText"
                md-items="tag in homeCtrl.querySearch(homeCtrl.searchText)"
                md-item-text="tag.text"
                placeholder="+Tag"
                secondary-placeholder="+Tag">
          <md-item-template>
            <span md-highlight-text="homeCtrl.searchText">{{tag.text}}</span>
          </md-item-template>
        </md-autocomplete>
        <md-chip-template>
          <span>{{$chip.text}}</span>
        </md-chip-template>
      </md-chips>
      <br/>
    </div>

    <div ng-if="homeCtrl.editMode == true" class="note-dialog-tags-wrapper">
      <md-chips
              md-autocomplete-snap
              ng-model="homeCtrl.editedNote.tags"
              md-on-append="homeCtrl.newTagAppend($chip)">
        <md-autocomplete
                md-input-name="autocompleteField"
                md-selected-item="homeCtrl.selectedItem"
                md-search-text="homeCtrl.searchText"
                md-items="tag in homeCtrl.querySearch(homeCtrl.searchText)"
                md-item-text="tag.text"
                placeholder="+Tag"
                secondary-placeholder="+Tag">
          <md-item-template>
            <span md-highlight-text="homeCtrl.searchText">{{tag.text}}</span>
          </md-item-template>
        </md-autocomplete>
        <md-chip-template>
          <span>{{$chip.text}}</span>
        </md-chip-template>
      </md-chips>
      <br/>
    </div>

  </div>

  <!--Footer-->
  <div class="cp-new-note-footer md-actions">
    <md-button ng-click="homeCtrl.closeNote()" class="md-primary cp-new-note-button" style="left: 20px;">
      Back
    </md-button>
    <md-button ng-if="homeCtrl.editMode == false" ng-disabled="noteContentForm.$pristine && noteTitleForm.$pristine" ng-click="homeCtrl.create()" class="md-primary cp-new-note-button" style="right: 20px;">
      Save
    </md-button>
    <md-button ng-if="homeCtrl.editMode == true" ng-click="homeCtrl.update()" class="md-primary cp-new-note-button" style="right: 20px;">
      Update
    </md-button>
  </div>

</div>
